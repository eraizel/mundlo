import { useMemo } from "react";
import seedrandom from "seedrandom";
import { countriesWithImage, Country } from "../domain/countries";

const forcedCountries: Record<string, string> = {
  "2022-03-07": "BN",
  "2022-03-08": "PM",
  "2022-03-09": "BY",
  "2022-03-10": "ST",
  "2022-03-11": "VC",
  "2022-03-12": "TK",
  "2022-03-13": "CU",
  "2022-03-14": "KG",
  "2022-03-15": "SK",
  "2022-03-16": "SV",
  "2022-03-17": "BQ",
  "2022-03-18": "HK",
  "2022-03-19": "FO",
  "2022-03-20": "SJ",
  "2022-03-21": "KE",
  "2022-03-22": "TG",
  "2022-03-23": "SH",
  "2022-03-24": "MF",
  "2022-03-25": "CO",
  "2022-03-26": "BO",
  "2022-03-27": "AZ",
  "2022-03-28": "CR",
  "2022-03-29": "CM",
  "2022-03-30": "CD",
  "2022-03-31": "KH",
  "2022-04-01": "VE",
  "2022-04-02": "AR",
  "2022-04-03": "KR",
  "2022-04-04": "IQ",
  "2022-04-05": "HT",
  "2022-04-06": "VN",
  "2022-04-07": "AD",
  "2022-04-08": "GL",
  "2022-04-09": "LA",
  "2022-04-10": "NE",
  "2022-04-11": "MC",
  "2022-04-12": "TZ",
  "2022-04-13": "AE",
  "2022-04-14": "WF",
  "2022-04-15": "DZ",
  "2022-04-16": "FJ",
  "2022-04-17": "VU",
  "2022-04-18": "AW",
  "2022-04-19": "TF",
  "2022-04-20": "NL",
  "2022-04-21": "UG",
  "2022-04-22": "IR",
  "2022-04-23": "MX",
  "2022-04-24": "UZ",
  "2022-04-25": "CY",
  "2022-04-26": "FR",
  "2022-04-27": "CC",
  "2022-04-28": "GS",
  "2022-04-29": "BF",
  "2022-04-30": "BA",
  "2022-05-01": "UY",
  "2022-05-02": "PY",
  "2022-05-03": "DM",
  "2022-05-04": "RE",
  "2022-05-05": "ME",
  "2022-05-06": "SR",
  "2022-05-07": "CF",
  "2022-05-08": "NR",
  "2022-05-09": "SX",
  "2022-05-10": "SE",
  "2022-05-11": "AX",
  "2022-05-12": "IO",
  "2022-05-13": "CZ",
  "2022-05-14": "IT",
  "2022-05-15": "DO",
  "2022-05-16": "SZ",
  "2022-05-17": "MW",
  "2022-05-18": "TM",
  "2022-05-19": "AI",
  "2022-05-20": "HN",
  "2022-05-21": "TL",
  "2022-05-22": "NO",
  "2022-05-23": "BR",
  "2022-05-24": "ZW",
  "2022-05-25": "PH",
  "2022-05-26": "PL",
  "2022-05-27": "HM",
  "2022-05-28": "SB",
  "2022-05-29": "LY",
  "2022-05-30": "KY",
  "2022-05-31": "MG",
  "2022-06-01": "BV",
  "2022-06-02": "GA",
  "2022-06-03": "SG",
  "2022-06-04": "OM",
  "2022-06-05": "CI",
  "2022-06-06": "AL",
  "2022-06-07": "SN",
  "2022-06-08": "ML",
  "2022-06-09": "RO",
  "2022-06-10": "CA",
  "2022-06-11": "SI",
  "2022-06-12": "ZM",
  "2022-06-13": "NA",
  "2022-06-14": "NI",
  "2022-06-15": "BM",
  "2022-06-16": "CH",
  "2022-06-17": "HU",
  "2022-06-18": "NC",
  "2022-06-19": "BG",
  "2022-06-20": "GM",
  "2022-06-21": "AG",
  "2022-06-22": "PW",
  "2022-06-23": "TN",
  "2022-06-24": "IN",
  "2022-06-25": "TC",
  "2022-06-26": "PF",
  "2022-06-27": "PK",
  "2022-06-28": "DK",
  "2022-06-29": "ES",
  "2022-06-30": "BW",
  "2022-07-01": "GU",
  "2022-07-02": "ZA",
  "2022-07-03": "CX",
  "2022-07-04": "WS",
  "2022-07-05": "CW",
  "2022-07-06": "GW",
  "2022-07-07": "KI",
  "2022-07-08": "MA",
  "2022-07-09": "KP",
  "2022-07-10": "LV",
  "2022-07-11": "PE",
  "2022-07-12": "LB",
  "2022-07-13": "TH",
  "2022-07-14": "VG",
  "2022-07-15": "GP",
  "2022-07-16": "SS",
  "2022-07-17": "AT",
  "2022-07-18": "EC",
  "2022-07-19": "GE",
  "2022-07-20": "LR",
  "2022-07-21": "YT",
  "2022-07-22": "SA",
  "2022-07-23": "GN",
  "2022-07-24": "MQ",
  "2022-07-25": "RU",
  "2022-07-26": "RW",
  "2022-07-27": "BE",
  "2022-07-28": "ET",
  "2022-07-29": "TR",
  "2022-07-30": "TO",
  "2022-07-31": "LC",
  "2022-08-01": "GF",
  "2022-08-02": "CK",
  "2022-08-03": "EE",
  "2022-08-04": "MM",
  "2022-08-05": "KW",
  "2022-08-06": "BT",
  "2022-08-07": "GH",
  "2022-08-08": "SL",
  "2022-08-09": "AQ",
  "2022-08-10": "GY",
  "2022-08-11": "QA",
  "2022-08-12": "PN",
  "2022-08-13": "CL",
  "2022-08-14": "JP",
  "2022-08-15": "BS",
  "2022-08-16": "TW",
  "2022-08-17": "AF",
  "2022-08-18": "KN",
  "2022-08-19": "KM",
  "2022-08-20": "FK",
  "2022-08-21": "PR",
  "2022-08-22": "PT",
  "2022-08-23": "IM",
  "2022-08-24": "MS",
  "2022-08-25": "US",
  "2022-08-26": "MY",
  "2022-08-27": "LS",
  "2022-08-28": "GI",
  "2022-08-29": "DE",
  "2022-08-30": "NZ",
  "2022-08-31": "SY",
  "2022-09-01": "VI",
  "2022-09-02": "BJ",
  "2022-09-03": "EH",
  "2022-09-04": "GR",
  "2022-09-05": "PG",
  "2022-09-06": "IL",
  "2022-09-07": "LK",
  "2022-09-08": "JO",
  "2022-09-09": "GT",
  "2022-09-10": "JM",
  "2022-09-11": "DJ",
  "2022-09-12": "AO",
  "2022-09-13": "LI",
  "2022-09-14": "BB",
  "2022-09-15": "MN",
  "2022-09-16": "FI",
  "2022-09-17": "RS",
  "2022-09-18": "AU",
  "2022-09-19": "SM",
  "2022-09-20": "NP",
  "2022-09-21": "NU",
  "2022-09-22": "SO",
  "2022-09-23": "MD",
  "2022-09-24": "LU",
  "2022-09-25": "GG",
  "2022-09-26": "ID",
  "2022-09-27": "TJ",
  "2022-09-28": "MT",
  "2022-09-29": "MO",
  "2022-09-30": "UA",
  "2022-10-01": "VA",
  "2022-10-02": "BD",
  "2022-10-03": "CN",
  "2022-10-04": "MU",
  "2022-10-05": "CG",
  "2022-10-06": "MR",
  "2022-10-07": "AS",
  "2022-10-08": "IE",
  "2022-10-09": "BI",
  "2022-10-10": "HR",
  "2022-10-11": "MK",
  "2022-10-12": "YE",
  "2022-10-13": "NG",
  "2022-10-14": "AM",
  "2022-10-15": "SC",
  "2022-10-16": "MV",
  "2022-10-17": "SD",
  "2022-10-18": "LT",
  "2022-10-19": "NF",
  "2022-10-20": "EG",
  "2022-10-21": "ER",
  "2022-10-22": "CV",
  "2022-10-23": "TT",
  "2022-10-24": "GD",
  "2022-10-25": "PA",
  "2022-10-26": "GQ",
  "2022-10-27": "IS",
  "2022-10-28": "BH",
  "2022-10-29": "KZ",
  "2022-10-30": "TD",
  "2022-10-31": "MZ",
  "2022-11-01": "GB",
  "2022-11-02": "BZ",
  "2022-11-03": "BL",
};

export function useCountry(dayString: string): [Country, number, number] {
  const country = useMemo(() => {
    const forcedCountryCode = forcedCountries[dayString];
    const forcedCountry =
      forcedCountryCode != null
        ? countriesWithImage.find(
            (country) => country.code === forcedCountryCode
          )
        : undefined;

    return (
      forcedCountry ??
      countriesWithImage[
        Math.floor(seedrandom.alea(dayString)() * countriesWithImage.length)
      ]
    );
  }, [dayString]);

  const randomAngle = useMemo(
    () => seedrandom.alea(dayString)() * 36,
    [dayString]
  );

  const imageScale = useMemo(() => {
    const normalizedAngle = 45 - (randomAngle % 90);
    const radianAngle = (normalizedAngle * Math.PI) / 180;
    return 1 / (Math.cos(radianAngle) * Math.sqrt(2));
  }, [randomAngle]);

  return [country, randomAngle, imageScale];
}
