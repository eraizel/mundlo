import { useMemo } from "react";
import seedrandom from "seedrandom";
import { countriesWithImage, Country } from "../domain/countries";

const forcedCountries: Record<string, string> = {
  "2022-02-02": "TD",
  "2022-02-03": "PY",
  "2022-03-07": "pm",
  "2022-03-08": "bn",
  "2022-03-09": "by",
  "2022-03-10": "st",
  "2022-03-11": "vc",
  "2022-03-12": "tk",
  "2022-03-13": "cu",
  "2022-03-14": "kg",
  "2022-03-15": "sk",
  "2022-03-16": "sv",
  "2022-03-17": "bq",
  "2022-03-18": "hk",
  "2022-03-19": "fo",
  "2022-03-20": "sj",
  "2022-03-21": "ke",
  "2022-03-22": "tg",
  "2022-03-23": "sh",
  "2022-03-24": "mf",
  "2022-03-25": "co",
  "2022-03-26": "bo",
  "2022-03-27": "az",
  "2022-03-28": "cr",
  "2022-03-29": "cm",
  "2022-03-30": "cd",
  "2022-03-31": "kh",
  "2022-04-01": "ve",
  "2022-04-02": "ar",
  "2022-04-03": "kr",
  "2022-04-04": "iq",
  "2022-04-05": "ht",
  "2022-04-06": "vn",
  "2022-04-07": "ad",
  "2022-04-08": "gl",
  "2022-04-09": "la",
  "2022-04-10": "ne",
  "2022-04-11": "mc",
  "2022-04-12": "tz",
  "2022-04-13": "ae",
  "2022-04-14": "wf",
  "2022-04-15": "dz",
  "2022-04-16": "fj",
  "2022-04-17": "vu",
  "2022-04-18": "aw",
  "2022-04-19": "tf",
  "2022-04-20": "nl",
  "2022-04-21": "ug",
  "2022-04-22": "ir",
  "2022-04-23": "mx",
  "2022-04-24": "uz",
  "2022-04-25": "cy",
  "2022-04-26": "fr",
  "2022-04-27": "cc",
  "2022-04-28": "gs",
  "2022-04-29": "bf",
  "2022-04-30": "ba",
  "2022-05-01": "uy",
  "2022-05-02": "py",
  "2022-05-03": "dm",
  "2022-05-04": "re",
  "2022-05-05": "me",
  "2022-05-06": "sr",
  "2022-05-07": "cf",
  "2022-05-08": "nr",
  "2022-05-09": "sx",
  "2022-05-10": "se",
  "2022-05-11": "ax",
  "2022-05-12": "io",
  "2022-05-13": "cz",
  "2022-05-14": "it",
  "2022-05-15": "do",
  "2022-05-16": "sz",
  "2022-05-17": "mw",
  "2022-05-18": "tm",
  "2022-05-19": "ai",
  "2022-05-20": "hn",
  "2022-05-21": "tl",
  "2022-05-22": "no",
  "2022-05-23": "br",
  "2022-05-24": "zw",
  "2022-05-25": "ph",
  "2022-05-26": "pl",
  "2022-05-27": "hm",
  "2022-05-28": "sb",
  "2022-05-29": "ly",
  "2022-05-30": "ky",
  "2022-05-31": "mg",
  "2022-06-01": "bv",
  "2022-06-02": "ga",
  "2022-06-03": "sg",
  "2022-06-04": "om",
  "2022-06-05": "ci",
  "2022-06-06": "al",
  "2022-06-07": "sn",
  "2022-06-08": "ml",
  "2022-06-09": "ro",
  "2022-06-10": "ca",
  "2022-06-11": "si",
  "2022-06-12": "zm",
  "2022-06-13": "na",
  "2022-06-14": "ni",
  "2022-06-15": "bm",
  "2022-06-16": "ch",
  "2022-06-17": "hu",
  "2022-06-18": "nc",
  "2022-06-19": "bg",
  "2022-06-20": "gm",
  "2022-06-21": "ag",
  "2022-06-22": "pw",
  "2022-06-23": "tn",
  "2022-06-24": "in",
  "2022-06-25": "tc",
  "2022-06-26": "pf",
  "2022-06-27": "pk",
  "2022-06-28": "dk",
  "2022-06-29": "es",
  "2022-06-30": "bw",
  "2022-07-01": "gu",
  "2022-07-02": "za",
  "2022-07-03": "cx",
  "2022-07-04": "ws",
  "2022-07-05": "cw",
  "2022-07-06": "gw",
  "2022-07-07": "ki",
  "2022-07-08": "ma",
  "2022-07-09": "kp",
  "2022-07-10": "lv",
  "2022-07-11": "pe",
  "2022-07-12": "lb",
  "2022-07-13": "th",
  "2022-07-14": "vg",
  "2022-07-15": "gp",
  "2022-07-16": "ss",
  "2022-07-17": "at",
  "2022-07-18": "ec",
  "2022-07-19": "ge",
  "2022-07-20": "lr",
  "2022-07-21": "yt",
  "2022-07-22": "sa",
  "2022-07-23": "gn",
  "2022-07-24": "mq",
  "2022-07-25": "ru",
  "2022-07-26": "rw",
  "2022-07-27": "be",
  "2022-07-28": "et",
  "2022-07-29": "tr",
  "2022-07-30": "to",
  "2022-07-31": "lc",
  "2022-08-01": "gf",
  "2022-08-02": "ck",
  "2022-08-03": "ee",
  "2022-08-04": "mm",
  "2022-08-05": "kw",
  "2022-08-06": "bt",
  "2022-08-07": "gh",
  "2022-08-08": "sl",
  "2022-08-09": "aq",
  "2022-08-10": "gy",
  "2022-08-11": "qa",
  "2022-08-12": "pn",
  "2022-08-13": "cl",
  "2022-08-14": "jp",
  "2022-08-15": "bs",
  "2022-08-16": "tw",
  "2022-08-17": "af",
  "2022-08-18": "kn",
  "2022-08-19": "km",
  "2022-08-20": "fk",
  "2022-08-21": "pr",
  "2022-08-22": "pt",
  "2022-08-23": "im",
  "2022-08-24": "ms",
  "2022-08-25": "us",
  "2022-08-26": "my",
  "2022-08-27": "ls",
  "2022-08-28": "gi",
  "2022-08-29": "de",
  "2022-08-30": "nz",
  "2022-08-31": "sy",
  "2022-09-01": "vi",
  "2022-09-02": "bj",
  "2022-09-03": "eh",
  "2022-09-04": "gr",
  "2022-09-05": "pg",
  "2022-09-06": "il",
  "2022-09-07": "lk",
  "2022-09-08": "jo",
  "2022-09-09": "gt",
  "2022-09-10": "jm",
  "2022-09-11": "dj",
  "2022-09-12": "ao",
  "2022-09-13": "li",
  "2022-09-14": "bb",
  "2022-09-15": "mn",
  "2022-09-16": "fi",
  "2022-09-17": "rs",
  "2022-09-18": "au",
  "2022-09-19": "sm",
  "2022-09-20": "np",
  "2022-09-21": "nu",
  "2022-09-22": "so",
  "2022-09-23": "md",
  "2022-09-24": "lu",
  "2022-09-25": "gg",
  "2022-09-26": "id",
  "2022-09-27": "tj",
  "2022-09-28": "mt",
  "2022-09-29": "mo",
  "2022-09-30": "ua",
  "2022-10-01": "va",
  "2022-10-02": "bd",
  "2022-10-03": "cn",
  "2022-10-04": "mu",
  "2022-10-05": "cg",
  "2022-10-06": "mr",
  "2022-10-07": "as",
  "2022-10-08": "ie",
  "2022-10-09": "bi",
  "2022-10-10": "hr",
  "2022-10-11": "mk",
  "2022-10-12": "ye",
  "2022-10-13": "ng",
  "2022-10-14": "am",
  "2022-10-15": "sc",
  "2022-10-16": "mv",
  "2022-10-17": "sd",
  "2022-10-18": "lt",
  "2022-10-19": "nf",
  "2022-10-20": "eg",
  "2022-10-21": "er",
  "2022-10-22": "cv",
  "2022-10-23": "tt",
  "2022-10-24": "gd",
  "2022-10-25": "pa",
  "2022-10-26": "gq",
  "2022-10-27": "is",
  "2022-10-28": "bh",
  "2022-10-29": "kz",
  "2022-10-30": "td",
  "2022-10-31": "mz",
  "2022-11-01": "gb",
  "2022-11-02": "bz",
  "2022-11-03": "bl",
};

export function useCountry(dayString: string): [Country, number, number] {
  const country = useMemo(() => {
    const forcedCountryCode = forcedCountries[dayString];
    const forcedCountry =
      forcedCountryCode != null
        ? countriesWithImage.find(
            (country) => country.code === forcedCountryCode
          )
        : undefined;

    return (
      forcedCountry ??
      countriesWithImage[
        Math.floor(seedrandom.alea(dayString)() * countriesWithImage.length)
      ]
    );
  }, [dayString]);

  const randomAngle = useMemo(
    () => seedrandom.alea(dayString)() * 36,
    [dayString]
  );

  const imageScale = useMemo(() => {
    const normalizedAngle = 45 - (randomAngle % 90);
    const radianAngle = (normalizedAngle * Math.PI) / 180;
    return 1 / (Math.cos(radianAngle) * Math.sqrt(2));
  }, [randomAngle]);

  return [country, randomAngle, imageScale];
}
